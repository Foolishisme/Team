### 注：record字段假如是错的，也不会提示错误，而是使用默认配置


```
# go2rtc配置 - 视频流转发

go2rtc:

  streams:

    test:

      - /media/frigate/car-stopping.mp4

    test2:

      - /media/frigate/walk.mp4

    camera_6:

      - rtsp://normal:jU8azeo34@192.168.2.6:554

    camera_6_sub:

      - rtsp://normal:jU8azeo34@192.168.2.6:554/stream1

    camera_7:

      - rtsp://normal:jU8azeo34@192.168.2.7:554

    camera_7_sub:

      - rtsp://normal:jU8azeo34@192.168.2.7:554/stream1

    camera_8:

      - rtsp://normal:jU8azeo34@192.168.2.8:554

    camera_8_sub:

      - rtsp://normal:jU8azeo34@192.168.2.8:554/stream1

  webrtc:

    candidates:

      - 192.168.2.5:8555

      - stun:8555

  

record:

  enabled: True # 只有设置了enabled为True时录制功能才会生效 #

  safe_level: 2 # 1 或 2，safe_level=2录制danger_level=1和2的录像（可疑和危险），safe_level=1只录制danger_level=2的录像（危险）

  retain:

    days: 30 # 保留天数

    mode: motion # 保留模式：all（全部）、motion（仅保存有画面变动）、active_objects（仅保存有活动对象）

# 全局快照配置

snapshots:

  enabled: True

  bounding_box: True

  timestamp: True # 门口监控建议显示时间戳

  crop: False

  retain:

    default: 30 # 门口快照保留30天

    objects:

      person: 60 # 人物快照保留60天

  

cameras:

  # 门口摄像头 - camera_6

  camera_6:

    ffmpeg:

      inputs:

        - path: rtsp://127.0.0.1:8554/camera_6_sub

          input_args: preset-rtsp-restream

          roles:

            - detect

        - path: rtsp://127.0.0.1:8554/camera_6

          input_args: preset-rtsp-restream

          roles:

            - record

    detect:

      enabled: True

      height: 480

      width: 640

      fps: 5

  

    # 门口区域配置

    zones:

      entrance: # 门口入口区域

        coordinates: 150,200,490,200,490,480,150,480 # 画面中下部区域

        inertia: 3 # 连续3帧确认在区域内

        loitering_time: 5 # 在门口停留5秒触发警报

        objects:

          - person

  

      walkway: # 走道区域（门口前方）

        coordinates: 0,300,640,300,640,480,0,480 # 画面下半部

        inertia: 2

        objects:

          - person

          - car

  

      restricted: # 禁止区域（可选，比如花坛）

        coordinates: 0,0,150,0,150,200,0,200 # 画面左上角

        objects:

          - person

  

    objects:

      track:

        - person

        - car

        - dog # 门口可能需要检测宠物

        - package # 检测包裹（如果模型支持）

      filters:

        person:

          min_area: 3000 # 门口距离近，面积可以稍小

          max_area: 100000

          threshold: 0.75 # 提高置信度

          min_score: 0.6

          # 排除画面边缘误检测

          mask: 0,0,50,0,50,480,0,480,590,0,640,0,640,480,590,480

        car:

          min_area: 8000

          threshold: 0.7

        dog:

          min_area: 1000

          threshold: 0.6

  

    # 门口专属警报配置

    review:

      alerts:

        enabled: True

        labels:

          - person

          - car

        required_zones:

          - entrance # 只有进入门口区域才触发警报

      detections:

        enabled: True

        labels:

          - person

          - dog

        required_zones:

          - walkway # 走道检测

  

    # 门口快照配置

    snapshots:

      enabled: True

      bounding_box: True

      timestamp: True

      required_zones:

        - entrance

      retain:

        default: 30

        objects:

          person: 90 # 门口人物快照保留3个月

  

  camera_7:

    ffmpeg:

      inputs:

        - path: rtsp://127.0.0.1:8554/camera_7_sub

          input_args: preset-rtsp-restream

          roles:

            - detect

        - path: rtsp://127.0.0.1:8554/camera_7

          input_args: preset-rtsp-restream

          roles:

            - record

    detect:

      enabled: True

      height: 480

      width: 640

      fps: 5

    objects:

      track:

        - person

        - car

      filters:

        person:

          min_area: 2000

          threshold: 0.7

        car:

          min_area: 5000

          threshold: 0.7

  

  camera_8:

    ffmpeg:

      inputs:

        - path: rtsp://127.0.0.1:8554/camera_8_sub

          input_args: preset-rtsp-restream

          roles:

            - detect

        - path: rtsp://127.0.0.1:8554/camera_8

          input_args: preset-rtsp-restream

          roles:

            - record

    detect:

      enabled: True

      height: 480

      width: 640

      fps: 5

    objects:

      track:

        - person

        - car

      filters:

        person:

          min_area: 2000

          threshold: 0.7

        car:

          min_area: 5000

          threshold: 0.7

  

version: 0.17-0
```
